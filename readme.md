

# FIWARE Milling Machine adaptor

This script will translate data output from a Milling Machine (sensors, status...) to NGSIv2. These data is generated by a Milling Machine in a CSV format a a set of time stamps, and each time stamp providing information of the different sensors from the machine:

![](./figs/input_file.png)

The script will take this input using a configuration file. This configuration file marks which columns will be translated, the data type and the attribute name that will be used in NGSI.

This configuration file will be also used to create a device in NGSI format. The device will be configured about the attributes specified in this configuration file.


```
{
  "config": [{
     "colunm_name": "H",
      "type": "Integer",
      "attribute_name" : "S_act"
    },
    {
     "colunm_name": "F",
      "type": "integer",
      "attribute_name": "tool"
    }
  ]
}
```

According to this configuration: 

 * A device will be created with two attributes: "S_act" with integer values from column H and "tool" as integer from column F.
 * A CSV file will be parsed to extract columns F and H
 * Each row representing a time stamp will be send to Orion about columns F and H. Translate into a JSON NGSIv2

## How to run it

The script has been developed with Python, so, you need Python installed in your system.

./script.py device_name input_file.csv 
 * device_name to be created and representing the Milling Machine providing the data.
 * input_file.csv is a data file generated by a Milling MAchine
 
## How to run it with Docker

